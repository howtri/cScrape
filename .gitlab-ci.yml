before_script:
  # Install build essentials
  - yum install -y git gcc make cmake
  # Clone the cmocka source code from the official Git repository
  - git clone https://github.com/clibs/cmocka.git
  # Build and install cmocka
  - mkdir cmocka/build && cd cmocka/build
  - cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release ..
  - make
  - make install
  # Go back to the previous directory
  - cd ../../
  - ls
  - pwd

build:
  stage: build
  script:
    - cd c_web_server
    - make
  artifacts:
    paths:
      - c_web_server/bin/
    expire_in: 1 hour

test:
  stage: test
  script:
    - cd c_web_server
    - make test
